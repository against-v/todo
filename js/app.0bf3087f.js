(function(t){function e(e){for(var s,c,o=e[0],r=e[1],l=e[2],d=0,h=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&h.push(n[c][0]),n[c]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var r=a[o];0!==n[r]&&(s=!1)}s&&(i.splice(e--,1),t=c(c.s=a[0]))}return t}var s={},n={app:0},i=[];function c(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=t,c.c=s,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(a,s,function(e){return t[e]}.bind(null,s));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/todo/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=r;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"page"},[a("div",{staticClass:"page__header"},[a("main-header")],1),a("div",{staticClass:"page__body"},[a("router-view")],1),a("div",{staticClass:"page__footer"},[a("main-footer")],1)]),t.confirmModal.show?a("confirm-modal",{attrs:{text:t.confirmModal.text,"confirm-func":t.confirmModal.confirmFunc},on:{close:function(e){return t.toggleConfirmModal({show:!1})}}}):t._e()],1)},i=[],c=a("5530"),o=a("2f62"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header"},[a("div",{staticClass:"header__container container"},[a("div",{staticClass:"header__logo"},[a("router-link",{staticClass:"logo",attrs:{to:{name:"MainPage"}}},[t._v("ToDo")])],1)])])},l=[],u={name:"MainHeader"},d=u,h=a("2877"),f=Object(h["a"])(d,r,l,!1,null,null,null),m=f.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"},[a("div",{staticClass:"footer__container container"},[a("div",{staticClass:"footer__logo"},[a("router-link",{staticClass:"logo",attrs:{to:{name:"MainPage"}}},[t._v("ToDo")])],1),a("a",{staticClass:"footer__copyright",attrs:{href:"mailto:aleksandr.azdakhov@gmail.com"}},[t._v("aleksandr.azdakhov@gmail.com")])])])},p=[],v={name:"MainFooter"},_=v,C=Object(h["a"])(_,k,p,!1,null,null,null),b=C.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal"},[a("div",{staticClass:"modal__text"},[t._v(t._s(t.text))]),a("div",{staticClass:"modal__buttons-container"},[a("button",{staticClass:"button button_paint-main",on:{click:function(e){return e.preventDefault(),t.onButtonConfirmClick(e)}}},[t._v("Да")]),a("button",{staticClass:"button",on:{click:function(e){return e.preventDefault(),t.$emit("close")}}},[t._v("Нет")])])])])},O=[],x={name:"confirm-modal",props:{text:{type:String,default:"Подтвердите действие"},confirmFunc:{func:{type:Function},params:{type:Array}}},methods:{onButtonConfirmClick:function(){this.confirmFunc.func.apply(this,this.confirmFunc.params),this.$emit("close")}}},T=x,y=Object(h["a"])(T,g,O,!1,null,null,null),j=y.exports,M={name:"App",components:{ConfirmModal:j,MainFooter:b,MainHeader:m},computed:Object(c["a"])({},Object(o["d"])(["confirmModal"])),data:function(){return{}},methods:Object(c["a"])({},Object(o["c"])(["toggleConfirmModal"]))},w=M,L=Object(h["a"])(w,n,i,!1,null,null,null),S=L.exports,E=a("8c4f"),P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"button-container"},[a("router-link",{staticClass:"button button_full button_paint-main",attrs:{to:{name:"TaskEditor",params:{id:"new"}}}},[t._v("Добавить новый список")])],1),a("ul",{staticClass:"task-list"},t._l(t.taskList,(function(t,e){return a("li",{staticClass:"task-list__item"},[a("task-card",{attrs:{card:t,index:e}})],1)})),0)])},$=[],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("div",{staticClass:"card__header"},[a("h2",{staticClass:"card__title"},[t._v(t._s(t.card.title))]),a("div",{staticClass:"card__controls"},[a("router-link",{staticClass:"button-square button-square_edit",attrs:{to:{name:"TaskEditor",params:{id:t.index+1}},title:"Редактировать"}}),a("button",{staticClass:"button-square button-square_remove",attrs:{title:"Удалить"},on:{click:function(e){return e.preventDefault(),t.confirmRemove(t.index)}}})],1)]),a("div",{staticClass:"card__body"},[a("div",{staticClass:"card__checklist card-checklist"},[a("h3",{staticClass:"card-checklist__title"},[t._v("Чеклист:")]),a("ul",{staticClass:"card-checklist__list"},t._l(t.checklist,(function(e){return a("li",{staticClass:"card-checklist__item",class:{"card-checklist__item_checked":e.checked}},[t._v(t._s(e.title))])})),0)])])])},N=[],J=(a("fb6a"),a("a9e3"),{name:"task-card",props:{card:{type:Object,default:function(){return{}}},index:{type:Number,default:0}},computed:{checklist:function(){return this.card.checklist.slice(0,3)}},data:function(){return{}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(o["c"])(["toggleConfirmModal"])),Object(o["b"])(["removeTask"])),{},{confirmRemove:function(){this.toggleConfirmModal({show:!0,text:"Вы действительно хотите удалить список?",confirmFunc:{func:this.removeTask,params:[this.index]}})}})}),A=J,F=Object(h["a"])(A,q,N,!1,null,null,null),D=F.exports,I={name:"MainPage",components:{TaskCard:D},computed:Object(c["a"])({},Object(o["d"])(["taskList"]))},R=I,B=Object(h["a"])(R,P,$,!1,null,null,null),z=B.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("form",{staticClass:"form"},[a("div",{staticClass:"form__el form-el"},[a("div",{staticClass:"form-el__title"},[t._v("Название")]),a("div",{staticClass:"form-el__body"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.localTask.title,expression:"localTask.title"}],staticClass:"input",domProps:{value:t.localTask.title},on:{input:function(e){e.target.composing||t.$set(t.localTask,"title",e.target.value)}}})])]),a("div",{staticClass:"form__el form-el"},[a("div",{staticClass:"form-el__title"},[t._v("Чеклист")]),a("div",{staticClass:"form-el__body"},[a("div",{staticClass:"checklist"},[a("div",{staticClass:"checklist__add checklist-add"},[a("div",{staticClass:"checklist-add__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkListInput,expression:"checkListInput"}],staticClass:"input",domProps:{value:t.checkListInput},on:{input:function(e){e.target.composing||(t.checkListInput=e.target.value)}}})]),a("div",{staticClass:"checklist-add__button"},[a("button",{staticClass:"button",on:{click:function(e){return e.preventDefault(),t.onAddCheckEl(e)}}},[t._v("Добавить пункт")])])]),t._l(t.localTask.checklist,(function(e,s){return a("div",{staticClass:"checklist__item"},[a("check-el",{attrs:{data:e,index:s},on:{"on-change":t.onChangeCheckEl,remove:t.onRemoveCheckEl}})],1)}))],2)])]),a("div",{staticClass:"form__el form__el_controls"},[a("div",{staticClass:"control-panel"},[a("div",{staticClass:"control-panel__item"},[a("button",{staticClass:"button-square button-square_back",attrs:{title:"Вернуться к списку"},on:{click:function(e){return e.preventDefault(),t.$router.push({name:"MainPage"})}}})]),a("div",{staticClass:"control-panel__item"},[a("button",{staticClass:"button-square button-square_cancel-changes",attrs:{disabled:!t.isChanged,title:"Отменить изменения"},on:{click:function(e){return e.preventDefault(),t.cancelChanges(e)}}})]),a("div",{staticClass:"control-panel__item"},[a("button",{staticClass:"button-square button-square_return-changes",attrs:{disabled:!t.taskAfterChanges,title:"Вернуть изменения"},on:{click:function(e){return e.preventDefault(),t.returnChanges(e)}}})]),a("div",{staticClass:"control-panel__item"},[t.isEdit?a("button",{staticClass:"button-square button-square_remove",attrs:{title:"Удалить"},on:{click:function(e){return e.preventDefault(),t.confirmRemove(e)}}}):t._e()]),a("div",{staticClass:"control-panel__item"},[a("button",{staticClass:"button button_full button_paint-main",attrs:{disabled:!this.isChanged},on:{click:function(e){return e.preventDefault(),t.onSaveTask(e)}}},[t._v("Сохранить")])])])])])])},G=[],K=(a("c740"),a("a434"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"check-el"},[a("div",{staticClass:"check-el__checkbox"},[a("label",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"checkbox__input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{change:function(e){var a=t.checked,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,c=t._i(a,i);s.checked?c<0&&(t.checked=a.concat([i])):c>-1&&(t.checked=a.slice(0,c).concat(a.slice(c+1)))}else t.checked=n}}}),a("div",{staticClass:"checkbox__icon"})])]),a("div",{staticClass:"check-el__input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input",domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),a("div",{staticClass:"check-el__button"},[a("button",{staticClass:"button-square button-square_remove",attrs:{title:"Удалить"},on:{click:function(e){return e.preventDefault(),t.$emit("remove",t.index)}}})])])}),Q=[],U={name:"check-el",props:{data:{type:Object,default:function(){return{}}},index:{type:Number,default:0}},computed:{checked:{get:function(){return this.data.checked},set:function(t){this.$emit("on-change",t,"checked",this.index)}},title:{get:function(){return this.data.title},set:function(t){this.$emit("on-change",t,"title",this.index)}}}},V=U,W=Object(h["a"])(V,K,Q,!1,null,null,null),X=W.exports,Y={name:"TaskPage",components:{CheckEl:X},props:{task:{type:Object,default:function(){return{}}}},computed:Object(c["a"])(Object(c["a"])({},Object(o["d"])(["taskList"])),{},{isEdit:function(){return"new"!==this.$route.params.id},index:function(){return this.isEdit?this.$route.params.id-1:-1}}),data:function(){return{localTask:{title:"",checklist:[]},taskBeforeChanges:{title:"",checklist:[]},taskAfterChanges:null,checkListInput:"",requireCheck:!0,isChanged:!1}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(o["c"])(["toggleConfirmModal"])),Object(o["b"])(["createTask","removeTask"])),{},{onAddCheckEl:function(){this.localTask.checklist.push({title:this.checkListInput,checked:!1}),this.checkListInput=""},onChangeCheckEl:function(t,e,a){this.localTask.checklist[a][e]=t},onRemoveCheckEl:function(t){this.localTask.checklist.splice(t,1)},onSaveTask:function(){this.createTask({task:this.localTask,index:this.index}),this.requireCheck=!1,this.$router.push({name:"MainPage"})},confirmRemove:function(){this.toggleConfirmModal({show:!0,text:"Вы действительно хотите удалить список?",confirmFunc:{func:this.onRemoveTask,params:[this.index]}})},onRemoveTask:function(t){this.requireCheck=!1,this.$router.push({name:"MainPage"}),this.removeTask(t)},cancelChanges:function(){this.taskAfterChanges=JSON.parse(JSON.stringify(this.localTask)),this.localTask=JSON.parse(JSON.stringify(this.taskBeforeChanges))},returnChanges:function(){this.localTask=JSON.parse(JSON.stringify(this.taskAfterChanges)),this.taskAfterChanges=null},checkChanges:function(){var t=this.taskBeforeChanges,e=this.localTask;if(t.title!==e.title)return!0;if(t.checklist.length!==e.checklist.length)return!0;var a=t.checklist.findIndex((function(t,a){return t.title!==e.checklist[a].title||t.checked!==e.checklist[a].checked}));return a>-1}}),created:function(){this.isEdit&&(this.taskBeforeChanges=JSON.parse(JSON.stringify(this.taskList[this.index])),this.localTask=JSON.parse(JSON.stringify(this.taskList[this.index])))},beforeRouteLeave:function(t,e,a){this.requireCheck&&this.isChanged?this.toggleConfirmModal({show:!0,text:"Несохраненные изменения удалятся. Вы действительно хотите вернуться к списку?",confirmFunc:{func:a}}):a()},watch:{localTask:{handler:function(){this.checkChanges()?this.isChanged=!0:this.isChanged=!1},deep:!0}}},Z=Y,tt=Object(h["a"])(Z,H,G,!1,null,null,null),et=tt.exports;s["a"].use(E["a"]);var at=[{path:"*",redirect:{name:"MainPage"}},{path:"/",name:"MainPage",component:z},{path:"/task/:id",name:"TaskEditor",component:et}],st=new E["a"]({mode:"history",base:"/todo/",routes:at});s["a"].use(o["a"]);var nt=new o["a"].Store({state:{taskList:JSON.parse(localStorage.getItem("taskList"))||[],confirmModal:{show:!1,text:"",confirmFunc:null}},mutations:{addTaskToTaskList:function(t,e){e.index>-1?t.taskList[e.index]=e.task:t.taskList.push(e.task)},removeTaskFromTaskList:function(t,e){t.taskList.splice(e,1)},updateTaskList:function(t){window.localStorage.taskList=JSON.stringify(t.taskList)},toggleConfirmModal:function(t,e){t.confirmModal=e}},actions:{createTask:function(t,e){var a=t.commit;a("addTaskToTaskList",e),a("updateTaskList")},removeTask:function(t,e){var a=t.commit;a("removeTaskFromTaskList",e),a("updateTaskList")}}});a("b4a8");s["a"].config.productionTip=!1,new s["a"]({router:st,store:nt,render:function(t){return t(S)}}).$mount("#app")},b4a8:function(t,e,a){}});
//# sourceMappingURL=app.0bf3087f.js.map